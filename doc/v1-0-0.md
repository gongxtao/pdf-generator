# 生成PDF的业务逻辑
1. 用户选择模板，输入内容;
2. 输入内容可以是用户上传的文档或者用户自己填写的内容;
3. 用户点击生成PDF按钮，系统将根据用户选择的模板和输入的内容生成PDF文件;
4. 用户可以查看和下载PDF文件。

# 生成PDF的技术路线
1. **模板**: 模板是一个image/webp的图片，模板内容根据CSS代码展示的示例图片，实际上PDF模板是一段CSS的代码；
2. **内容**: 内容可以是用户上传的文档或者用户自己填写的内容；
   - 上传文档: 支持用户上传Word、Excel、PPT等文档，系统将文档的内容提取出来，填充到富文本编辑器里；
   - 填写内容: 用户如果不上传文档，可以在富文本编辑器里填写内容。
3. **生成PDF**: 当用户点击生成PDF按钮时，系统将获取模板关联的CSS代码，根据CSS代码+文本内容生成HTML代码（页面），然后使用puppeteer库将HTML代码转换为PDF文件；
4. **存储**: 生成的PDF文件存储在本地目录（/pdf），用户可以通过链接查看和下载。

## 模板的分类
1. 报告模板，例如：
    [
        {
            id: 'business-report',
            name: '商业报告',
            description: '专业的商业报告模板，适用于企业汇报和分析',
            category: 'business',
            thumbnail: '/templates/business-report.jpg',
            previewUrl: '/templates/preview/business-report.pdf',
            template_content: ```@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Lato:wght@400;700&display=swap');

/* IMPORTANT Do not modify this stylesheet in any way unless explicitly instructed */
/* IMPORTANT - When dealing with Arabic text, employ lang="ar" and dir="rtl" and make any "border-left:" to be "border-right:" to ensure they display on the right side of the page and align with the Arabic text.*/

:root {
--primary-red: #E4002B;
--primary-blue: #0033A0;
--accent-blue: #007FFF;
--text-color: #333333;
--background-color: #FFFFFF;

--h1-color: var(--primary-red);
--h2-color: var(--primary-blue);
--h3-color: var(--primary-red);
--h4-color: var(--accent-blue);
--h5-color: var(--text-color);
--h6-color: var(--text-color);
}

h1, h2, h3, h4, h5, h6 {
font-family: 'Oswald', sans-serif;
font-weight: 700;
}

h1, .cover-page-main-title {
font-size: 24pt;
text-align: center;
margin-bottom: 0.3in;
color: var(--h1-color);
position: relative;
padding-bottom: 10px;
border-bottom: 4px solid var(--primary-blue);
}

h1::before, .cover-page-main-title::before {
content: """";
position: absolute;
bottom: -14px;
left: 50%;
transform: translateX(-50%);
width: 60%;
height: 4px;
background-color: var(--primary-red);
}

h2 {
font-size: 18pt;
color: var(--h2-color);
position: relative;
padding-left: 20px;
margin-top: 0.4in;
margin-bottom: 0.2in;
border-left: 8px solid var(--primary-red);
line-height: 1.5;
}

h3 {
font-size: 16pt;
color: var(--h3-color);
margin-top: 0.3in;
margin-bottom: 0.15in;
border-bottom: 2px dotted var(--accent-blue);
padding-bottom: 5px;
}

h4 {
font-size: 14pt;
color: var(--h4-color);
margin-top: 0.2in;
margin-bottom: 0.1in;
position: relative;
}

h4::before {
position: absolute;
left: 0;
color: var(--primary-red);
font-size: 1em;
top: 50%;
transform: translateY(-50%);
}

h5 {
font-size: 12pt;
color: var(--h5-color);
font-weight: 700;
margin-top: 0.15in;
margin-bottom: 0.05in;
}

h6 {
font-size: 11pt;
color: var(--h6-color);
font-weight: 400;
margin-top: 0.1in;
margin-bottom: 0.05in;
}

/* Never make adjustments to the body CSS */
body {
font-family: 'Lato', sans-serif;
color: var(--text-color);
box-sizing: border-box;
background-color: var(--background-color);
line-height: 1.5;
}

/* Use this for Arabic text and design elements*/
.rtl {
direction: rtl;
}

/* Use this highlight-block class sparingly. Only apply it to content that really stands out from the rest.*/
.highlight-block {
background-color: var(--primary-blue);
color: var(--background-color);
padding: 0.25in;
margin-bottom: 0.2in;
margin-top: 0.2in;
border-radius: 10px;
border-left: 8px solid var(--primary-red);
font-weight: 400;
position: relative;
overflow: hidden;
}

.highlight-block p {
color: var(--background-color);
}

li::marker {
color: var(--primary-red);
font-weight: bold;
}

.marker {
color: var(--primary-red);
font-weight: bold;
margin-right: 0.5em;
}

.table-title {
font-weight: bold;
margin-bottom: 10px;
page-break-after: avoid;
font-size: 14pt;
color: var(--primary-blue);
text-transform: uppercase;
}

table {
table-layout: fixed;
width: 100%;
border-collapse: collapse;
border-spacing: 0;
margin-bottom: 40px;
border: 2px solid var(--primary-blue);
border-radius: 8px;
overflow: hidden;
}

th, td {
border: 1px solid var(--accent-blue);
word-wrap: break-word;
overflow-wrap: break-word;
max-width: 1px;
padding: 12px 4px;
text-align: center;
font-size: 10pt;
font-weight: 400;
color: var(--text-color);
}

table th {
color: var(--background-color);
background-color: var(--primary-blue);
font-weight: 500;
font-size: 10pt;
text-transform: uppercase;
hyphens: auto;
}

td {
line-height: 1.4;
}

thead tr {
background: linear-gradient(to right, var(--primary-blue), var(--accent-blue));
color: white;
}

tr:nth-child(odd) {
background-color: #F0F8FF;
}

tr:nth-child(even) {
background-color: var(--background-color);
}

/* !!!*!!! Use this on tables where the first column SHOULD be highlighted. */
.highlight-first-col td:first-child {
  color: white;
  background: var(--primary-blue);
  font-weight: 500;
  text-transform: uppercase;
  hyphens: auto;
}

a {
color: var(--primary-red);
text-decoration: underline;
text-decoration-color: var(--accent-blue);
text-underline-offset: 3px;
}

blockquote {
font-style: italic;
border-left: 5px solid var(--accent-blue);
padding-left: 15px;
margin-left: 0;
color: #555555;
}

hr {
border: none;
height: 3px;
background: linear-gradient(to right, var(--primary-red), var(--primary-blue));
margin: 30px 0;
}

 /* !!!*!!! Only implement .cover-page class if provided with cover page text */
.cover-page {
}

.cover-page-subtitles {
}

.cover-page-subtitles {
}

/* Use this for any field lines and text placeholders. Example: <div class="form-line"> <span>Example Text:</span> <span>_______________________</span> </div> */
.form-line {
margin: 15px 0;
white-space: normal;
overflow: hidden;
}```
        },
        {
            id: 'academic-paper',
            name: '学术论文',
            description: '标准的学术论文格式，符合期刊投稿要求',
            category: 'academic',
            thumbnail: '/templates/academic-paper.jpg',
            previewUrl: '/templates/preview/academic-paper.pdf',
            template_content: ```@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Lato:wght@400;700&display=swap');

/* IMPORTANT Do not modify this stylesheet in any way unless explicitly instructed */
/* IMPORTANT - When dealing with Arabic text, employ lang="ar" and dir="rtl" and make any "border-left:" to be "border-right:" to ensure they display on the right side of the page and align with the Arabic text.*/

:root {
--primary-red: #E4002B;
--primary-blue: #0033A0;
--accent-blue: #007FFF;
--text-color: #333333;
--background-color: #FFFFFF;

--h1-color: var(--primary-red);
--h2-color: var(--primary-blue);
--h3-color: var(--primary-red);
--h4-color: var(--accent-blue);
--h5-color: var(--text-color);
--h6-color: var(--text-color);
}

h1, h2, h3, h4, h5, h6 {
font-family: 'Oswald', sans-serif;
font-weight: 700;
}

h1, .cover-page-main-title {
font-size: 24pt;
text-align: center;
margin-bottom: 0.3in;
color: var(--h1-color);
position: relative;
padding-bottom: 10px;
border-bottom: 4px solid var(--primary-blue);
}

h1::before, .cover-page-main-title::before {
content: """";
position: absolute;
bottom: -14px;
left: 50%;
transform: translateX(-50%);
width: 60%;
height: 4px;
background-color: var(--primary-red);
}

h2 {
font-size: 18pt;
color: var(--h2-color);
position: relative;
padding-left: 20px;
margin-top: 0.4in;
margin-bottom: 0.2in;
border-left: 8px solid var(--primary-red);
line-height: 1.5;
}

h3 {
font-size: 16pt;
color: var(--h3-color);
margin-top: 0.3in;
margin-bottom: 0.15in;
border-bottom: 2px dotted var(--accent-blue);
padding-bottom: 5px;
}

h4 {
font-size: 14pt;
color: var(--h4-color);
margin-top: 0.2in;
margin-bottom: 0.1in;
position: relative;
}

h4::before {
position: absolute;
left: 0;
color: var(--primary-red);
font-size: 1em;
top: 50%;
transform: translateY(-50%);
}

h5 {
font-size: 12pt;
color: var(--h5-color);
font-weight: 700;
margin-top: 0.15in;
margin-bottom: 0.05in;
}

h6 {
font-size: 11pt;
color: var(--h6-color);
font-weight: 400;
margin-top: 0.1in;
margin-bottom: 0.05in;
}

/* Never make adjustments to the body CSS */
body {
font-family: 'Lato', sans-serif;
color: var(--text-color);
box-sizing: border-box;
background-color: var(--background-color);
line-height: 1.5;
}

/* Use this for Arabic text and design elements*/
.rtl {
direction: rtl;
}

/* Use this highlight-block class sparingly. Only apply it to content that really stands out from the rest.*/
.highlight-block {
background-color: var(--primary-blue);
color: var(--background-color);
padding: 0.25in;
margin-bottom: 0.2in;
margin-top: 0.2in;
border-radius: 10px;
border-left: 8px solid var(--primary-red);
font-weight: 400;
position: relative;
overflow: hidden;
}

.highlight-block p {
color: var(--background-color);
}

li::marker {
color: var(--primary-red);
font-weight: bold;
}

.marker {
color: var(--primary-red);
font-weight: bold;
margin-right: 0.5em;
}

.table-title {
font-weight: bold;
margin-bottom: 10px;
page-break-after: avoid;
font-size: 14pt;
color: var(--primary-blue);
text-transform: uppercase;
}

table {
table-layout: fixed;
width: 100%;
border-collapse: collapse;
border-spacing: 0;
margin-bottom: 40px;
border: 2px solid var(--primary-blue);
border-radius: 8px;
overflow: hidden;
}

th, td {
border: 1px solid var(--accent-blue);
word-wrap: break-word;
overflow-wrap: break-word;
max-width: 1px;
padding: 12px 4px;
text-align: center;
font-size: 10pt;
font-weight: 400;
color: var(--text-color);
}

table th {
color: var(--background-color);
background-color: var(--primary-blue);
font-weight: 500;
font-size: 10pt;
text-transform: uppercase;
hyphens: auto;
}

td {
line-height: 1.4;
}

thead tr {
background: linear-gradient(to right, var(--primary-blue), var(--accent-blue));
color: white;
}

tr:nth-child(odd) {
background-color: #F0F8FF;
}

tr:nth-child(even) {
background-color: var(--background-color);
}

/* !!!*!!! Use this on tables where the first column SHOULD be highlighted. */
.highlight-first-col td:first-child {
  color: white;
  background: var(--primary-blue);
  font-weight: 500;
  text-transform: uppercase;
  hyphens: auto;
}

a {
color: var(--primary-red);
text-decoration: underline;
text-decoration-color: var(--accent-blue);
text-underline-offset: 3px;
}

blockquote {
font-style: italic;
border-left: 5px solid var(--accent-blue);
padding-left: 15px;
margin-left: 0;
color: #555555;
}

hr {
border: none;
height: 3px;
background: linear-gradient(to right, var(--primary-red), var(--primary-blue));
margin: 30px 0;
}

 /* !!!*!!! Only implement .cover-page class if provided with cover page text */
.cover-page {
}

.cover-page-subtitles {
}

.cover-page-subtitles {
}

/* Use this for any field lines and text placeholders. Example: <div class="form-line"> <span>Example Text:</span> <span>_______________________</span> </div> */
.form-line {
margin: 15px 0;
white-space: normal;
overflow: hidden;
}```
        }
    ]
2. 简历模板，例如：[
    {
        id: 'resume',
        name: '个人简历',
        description: '现代简洁的简历模板，突出个人技能和经验',
        category: 'personal',
        thumbnail: '/templates/resume.jpg',
        previewUrl: '/templates/preview/resume.pdf',
        template_content: ```@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap');

/* !!!*!!! IMPORTANT Do not modify this stylesheet in any way unless explicityly instructed. Do not add any additional inline padding, margins or styles ever. */

/* IMPORTANT - When dealing with Arabic text, employ lang="ar" and dir="rtl" and make any headings that use "border-left:" to be "border-right:" to ensure they display on the right side of the page and align with the Arabic text.*/

:root {
--text-color: #333;
--h1-color: #2c3e50;
--h2-color: #2c3e50;
--h3-color: #2c3e50;
}

.header {
text-align: center;
margin-bottom: 0.2in;
padding-bottom: 0.2in;
position: relative;
}

.header::after {
content: '';
position: absolute;
bottom: 0;
left: 25%;
width: 50%;
height: 1px;
background-image: linear-gradient(to right, transparent, #333, transparent);
}

 
/* Never make adjustments to the body CSS */
body {
font-family: 'Source Sans Pro', sans-serif;
line-height: 1.5;
color: var(--text-color);
background-color: white;
}

/* Never make adjustments to the container CSS */
.container {
background-color: var(--background-color);
position: relative;
overflow: hidden;
}

h1 {
font-family: 'Playfair Display', serif;
font-size: 24pt;
font-weight: 700;
margin-bottom: 0.1in;
color: var(--h1-color);
}

.contact-info {
font-size: 10pt;
color: #555;
}

h2 {
font-family: 'Playfair Display', serif;
font-size: 16pt;
margin-top: 0.2in;
margin-bottom: 0.2in;
color: var(--h2-color);
text-align: center;
position: relative;
}

h2::before, h2::after {
content: '';
position: absolute;
top: 50%;
width: 20%;
height: 1px;
background-image: linear-gradient(to right, var(--h2-color), transparent);
}

h2::before {
left: 0;
}

h2::after {
right: 0;
transform: rotate(180deg);
} 

.skills {
display: flex;
flex-wrap: wrap;
gap: 0.1in;
justify-content: center;
}

.skill-item {
background-color: white;
color: #2c3e50;
padding: 0.05in 0.1in;
border-radius: 3pt;
font-size: 9pt;
border: 1px solid #2c3e50;
}

/* IMPORTANT NOTE, this is the correct way to render the skill item. Do not use <span>:

    <h2 id="skills">Skills</h2>
    <div class="skills">
        <div class="skill-item">Problem-solving</div>
        <div class="skill-item">Computer Proficiency</div>
        <div class="skill-item">Organized</div> */

.experience-item {
margin-bottom: 0.2in;
position: relative;
}

.job-title {
font-weight: 600;
font-size: 12pt;
color: #2c3e50;
}

.company {
font-weight: 400;
color: #e74c3c;
  
}

.date {
position: absolute;
right: 0;
top: 0;
font-style: italic;
color: #7f8c8d;
}

ul {
padding-left: 0.3in;
margin-top: 0.1in;
margin-bottom: 0.1in;
list-style-type: none;
}

li {
margin-bottom: 0.05in;
position: relative;
padding-left: 0.2in;
}

ul li:before {
content: "❧";
color: #e74c3c;
position: absolute;
left: 0;
}

.page-break {
page-break-before: always;
}

pre {
white-space: pre-wrap;
word-wrap: break-word;
max-width: 100%;
}
a {
color: black;
text-decoration-color: red;
}```
    },
    {
        id: 'cover-letter',
        name: '求职信',
        description: '专业的求职信，突出个人技能和经验',
        category: 'personal',
        thumbnail: '/templates/cover-letter.jpg',
        previewUrl: '/templates/preview/cover-letter.pdf',
        template_content: ```@import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Montserrat:ital,wght@0,400;0,700;1,400;1,700&display=swap');

/* !!!*!!! IMPORTANT Do not modify this stylesheet in any way unless explicityly instructed. Do not add any additional inline padding or margins ever. */
/* !!!*!!! IMPORTANT - When dealing with Arabic text, employ lang="ar" and dir="rtl" and make any headings that use "border-left:" to be "border-right:" to ensure they display on the right side of the page and align with the Arabic text.*/

:root {
--primary-color: #2c3e50;
--secondary-color: #3498db;
--accent-color: #e74c3c;
--background-color: white;
--text-color: #333;
}

/* Never make adjustments to the body CSS */
body {
font-family: 'Montserrat', sans-serif;
line-height: 1.5;
color: var(--text-color);
margin: 0;
padding: 0;
background-color: var(--background-color);
}

.header {
text-align: center;
padding-top: 20px;
position: relative;
}

h1 {
font-family: 'Lora', serif;
font-size: 24pt;
font-weight: 700;
color: var(--primary-color);
margin-bottom: 0.1in;
margin-top: 0.5in;
position: relative;
display: inline-block;
}

h1::before, h1::after {
content: "✦";
position: absolute;
top: 50%;
transform: translateY(-50%);
color: var(--secondary-color);
font-size: 24pt;
}

h1::before {
left: -40px;
}

h1::after {
right: -40px;
}

.contact-info {
font-size: 10pt;
color: var(--text-color);
}

h2 {
font-family: 'Lora', serif;
font-size: 16pt;
font-weight: 700;
color: var(--primary-color);
margin-top: 0.3in;
margin-bottom: 0.2in;
position: relative;
padding-bottom: 10px;
}

h2::after {
content: '';
position: absolute;
left: 0;
bottom: 0;
width: 100%;
height: 2px;
background-image: linear-gradient(to right, var(--secondary-color), var(--accent-color));
}

h3 {
font-family: 'Montserrat', sans-serif;
font-size: 14pt;
font-weight: 600;
color: var(--secondary-color);
margin-top: 0.2in;
margin-bottom: 0.1in;
position: relative;
}

a {
color: var(--h1-color);
text-decoration-color: #e74c3c;
}

.skills {
display: flex;
flex-wrap: wrap;
gap: 0.1in;
}

.skill-item {
background-color: var(--background-color);
color: var(--primary-color);
padding: 0.05in 0.1in;
font-size: 9pt;
position: relative;
overflow: hidden;
border: 1px solid var(--secondary-color);
}

.skill-item::before {
content: '';
position: absolute;
top: -2px;
left: -2px;
right: -2px;
bottom: -2px;
background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
z-index: -1;
filter: blur(5px);
opacity: 0.3;
}

/* IMPORTANT NOTE, this is the correct way to render the skill item. Do not use <span>:

    <h2 id="skills">Skills</h2>
    <div class="skills">
        <div class="skill-item">Problem-solving</div>
        <div class="skill-item">Computer Proficiency</div>
        <div class="skill-item">Organized</div> */

.experience-item {
margin-bottom: 0.2in;
position: relative;
break-after: avoid;
}

.job-title {
font-weight: 600;
font-size: 12pt;
color: var(--primary-color);
margin-bottom: 0.05in;
width: 60%;
display: block;
}

.company {
font-weight: 400;
color: var(--secondary-color);
break-after: avoid;
width: 60%;
display: block;

}

.date {
position: absolute;
right: 0;
top: 0;
font-style: italic;
color: var(--text-color);
text-align: right;
}

ul {
padding-left: 0.3in;
margin-top: 0.1in;
margin-bottom: 0.1in;
list-style-type: none;
}

li {
margin-bottom: 0.05in;
position: relative;
padding-left: 0.2in;
}

ul li::before {
content: "❧";
position: absolute;
left: 0;
color: var(--accent-color);
font-size: 12pt;
}```
    }
]